var cnkt_installer=cnkt_installer||{};jQuery(document).ready(function(a){"use strict";var b=!1;cnkt_installer.install_plugin=function(c,d){confirm(te_installer_localize.install_now)&&(b=!0,c.addClass("installing"),a.ajax({type:"POST",url:te_installer_localize.ajax_url,data:{action:"timeline_express_add_on_installer",plugin:d,nonce:te_installer_localize.admin_nonce,dataType:"json"},success:function(a){a&&"success"===a.status?(c.attr("class","activate button button-primary"),c.html(te_installer_localize.activate_btn)):c.removeClass("installing"),b=!1},error:function(a,d,e){console.log(d),c.removeClass("installing"),b=!1}}))},cnkt_installer.activate_plugin=function(c,d){a.ajax({type:"POST",url:te_installer_localize.ajax_url,data:{action:"timeline_express_add_on_activation",plugin:d,premium:c.hasClass("premium"),nonce:te_installer_localize.admin_nonce,dataType:"json"},success:function(a){a&&"success"===a.status&&(c.attr("class","installed button disabled"),c.html(te_installer_localize.installed_btn)),b=!1},error:function(a,c,d){console.log(c),b=!1}})},a(document).on("click",".plugin-card a.button",function(c){var d=a(this),e=d.data("slug");if(!d.hasClass("disabled")){if(b)return!1;if(d.hasClass("premium"))return;c.preventDefault(),d.hasClass("install")&&cnkt_installer.install_plugin(d,e),d.hasClass("activate")&&cnkt_installer.activate_plugin(d,e)}})});